<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Win Delivery</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body { background-color: #f9f9f9; }
    .card:hover { transform: scale(1.02); transition: 0.3s; }
  </style>
</head>
<body>
  <div class="container py-4">
    <h1 class="text-center mb-4">üõµ Win Delivery</h1>
    <div id="shop-list" class="row"></div>
    <hr>
    <div id="menu-section" class="mt-4"></div>
  </div>

  <script>
    const apiURL = "https://script.google.com/macros/s/AKfycbxI8O4rurUwOzmXJGV4mHFKO498VdVIM29QjwzZxZbBhGGk8X3zz6mdmxMgyUy-bRv5/exec";

    async function loadShops() {
      const res = await fetch(apiURL);
      const data = await res.json();
      const shopList = document.getElementById("shop-list");

      data.shops.forEach(shop => {
        const col = document.createElement("div");
        col.className = "col-md-4 mb-3";
        col.innerHTML = `
          <div class="card h-100" onclick="loadMenu('${shop['‡∏£‡πâ‡∏≤‡∏ôID']}', '${shop['‡∏ä‡∏∑‡πà‡∏≠‡∏£‡πâ‡∏≤‡∏ô']}')">
            <img src="${shop['‡∏•‡∏¥‡∏á‡∏Å‡πå‡πÇ‡∏•‡πÇ‡∏Å‡πâ']}" class="card-img-top" style="height:200px; object-fit:cover;">
            <div class="card-body">
              <h5 class="card-title">${shop['‡∏ä‡∏∑‡πà‡∏≠‡∏£‡πâ‡∏≤‡∏ô']}</h5>
              <p class="card-text">üïô ${shop['‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏≥‡∏Å‡∏≤‡∏£']} | üöö ‡∏Ñ‡πà‡∏≤‡∏™‡πà‡∏á ${shop['‡∏Ñ‡πà‡∏≤‡∏™‡πà‡∏á‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô']} ‡∏ö‡∏≤‡∏ó</p>
            </div>
          </div>`;
        shopList.appendChild(col);
      });
    }

    async function loadMenu(restaurantId, shopName) {
      const res = await fetch(`${apiURL}?restaurantId=${restaurantId}`);
      const data = await res.json();
      const menuSection = document.getElementById("menu-section");
      menuSection.innerHTML = `<h3>üìã ‡πÄ‡∏°‡∏ô‡∏π‡∏à‡∏≤‡∏Å‡∏£‡πâ‡∏≤‡∏ô ${shopName}</h3><div class="row">`;

      data.menu.forEach(item => {
        menuSection.innerHTML += `
          <div class="col-md-4 mb-3">
            <div class="card h-100">
              <img src="${item['‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡πÄ‡∏°‡∏ô‡∏π']}" class="card-img-top" style="height:200px; object-fit:cover;">
              <div class="card-body">
                <h5 class="card-title">${item['‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏°‡∏ô‡∏π']}</h5>
                <p class="card-text">üí∞ ${item['‡∏£‡∏≤‡∏Ñ‡∏≤']} ‡∏ö‡∏≤‡∏ó</p>
                <button class="btn btn-success w-100">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏•‡∏á‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤</button>
              </div>
            </div>
          </div>`;
      });

      menuSection.innerHTML += "</div>";
    }

    loadShops();
  </script>
</body>
</html>
