<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>Win Delivery</title>
  <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
  <script>
    async function main() {
      await liff.init({ liffId: "dummy-liff-id" }); // ‡πÉ‡∏ä‡πâ liffId ‡∏õ‡∏•‡∏≠‡∏°‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏î‡πâ
      if (!liff.isLoggedIn()) {
        liff.login();
      }

      const profile = await liff.getProfile();
      document.getElementById("userId").value = profile.userId;
      document.getElementById("displayName").value = profile.displayName;
    }

    function sendData() {
      const data = {
        name: document.getElementById("displayName").value,
        phone: document.getElementById("phone").value,
        address: document.getElementById("address").value,
        order: document.getElementById("order").value,
        note: document.getElementById("note").value,
        userId: document.getElementById("userId").value
      };

      fetch("https://script.google.com/macros/s/AKfycbzA6rh0ytWuhUEvK31jTt0QnrmE09pbwoNyLktt13T9UnudNzj3YOhxLZaQ1E9HIRK7/exec", {
        method: 'POST',
        body: JSON.stringify(data),
        headers: {
          'Content-Type': 'application/json'
        }
      })
      .then(res => res.json())
      .then(res => {
        alert(res.message);
        if (liff.isInClient()) {
          liff.closeWindow();
        }
      });
    }

    window.onload = main;
  </script>
</head>
<body>
  <h2>Win Delivery üçú</h2>
  <input type="hidden" id="userId" />
  <input type="hidden" id="displayName" />

  <p>‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£: <input id="phone" type="text"></p>
  <p>‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà: <input id="address" type="text"></p>
  <p>‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠: <input id="order" type="text"></p>
  <p>‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏: <input id="note" type="text"></p>
  <button onclick="sendData()">‡∏™‡πà‡∏á‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå</button>
</body>
</html>
